

<h2>form using expansion panel with validation</h2>




 <mat-card >

  <button class="openall" (click)="accordion.openAll()">Open All </button>
  <button class="closeall" (click)="accordion.closeAll()">Close All </button>

 
  <form [formGroup]="myform" (ngSubmit)="doSubmit()">

    

    <mat-accordion #accordion="matAccordion" [multi]="true">

      <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)"  >
        <mat-expansion-panel-header>
          <mat-panel-title>
            Name Panel
          </mat-panel-title>
          <mat-panel-description>
            <mat-error   *ngIf="!myform.controls['fname'].valid && myform.controls['fname'].touched" class="errortext">Name field can not be blank</mat-error> 
          </mat-panel-description>
        </mat-expansion-panel-header>

        <mat-form-field>
  
          <input matInput placeholder="Name"  [formControl]="myform.controls['fname']" (blur)="inputUntouch(myform,'fname')">
       
        </mat-form-field>
       
        
        <mat-action-row>
          <button mat-button (click)="nextStep()">Next</button>
        </mat-action-row>

      </mat-expansion-panel>


      <mat-expansion-panel  [expanded]="step === 1" (opened)="setStep(1)" >
    <mat-expansion-panel-header>
      <mat-panel-title>
        E-mail  Panel
      </mat-panel-title>
      <mat-panel-description>
        <mat-error   *ngIf="!myform.controls['email'].valid && myform.controls['email'].touched" class="errortext">E-mail field can not be blank</mat-error> 
      </mat-panel-description>
    </mat-expansion-panel-header>
     <mat-form-field>
        
           <input matInput placeholder="E-mail"  [formControl]="myform.controls['email']" (blur)="inputUntouch(myform,'email')">
         </mat-form-field>
       
         <mat-action-row>
          <button mat-button  (click)="prevStep()">Previous</button>
          <button mat-button  (click)="nextStep()">Next</button>
        </mat-action-row>
  </mat-expansion-panel>




  <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)"  >
<mat-expansion-panel-header>
<mat-panel-title>
  Phone No Panel
</mat-panel-title>
<mat-panel-description>
  <mat-error   *ngIf="!myform.controls['phone'].valid && myform.controls['phone'].touched" class="errortext">Phone No field can not be blank</mat-error> 
</mat-panel-description>
</mat-expansion-panel-header>
<mat-form-field>
  <input matInput placeholder="Phone No"  [formControl]="myform.controls['phone']" (blur)="inputUntouch(myform,'phone')">
</mat-form-field>

<mat-action-row>
  <button mat-button  (click)="prevStep()">Previous</button>
  <button mat-button  (click)="nextStep()">Next</button>
</mat-action-row>
</mat-expansion-panel>



<mat-expansion-panel [expanded]="step === 3" (opened)="setStep(3)"  >
  <mat-expansion-panel-header>
  <mat-panel-title>
    Subject Panel
  </mat-panel-title>
  <mat-panel-description>
    <mat-error   *ngIf="!myform.controls['subject'].valid && myform.controls['subject'].touched" class="errortext">Subject field can not be blank</mat-error> 
  </mat-panel-description>
  </mat-expansion-panel-header>
  <mat-form-field>
    <input matInput placeholder="Subject"  [formControl]="myform.controls['subject']" (blur)="inputUntouch(myform,'subject')">
  </mat-form-field>

  <mat-action-row>
    <button mat-button  (click)="prevStep()">Previous</button>
    <button mat-button  (click)="nextStep()">Next</button>
  </mat-action-row>
 
  </mat-expansion-panel>


  <mat-expansion-panel  [expanded]="step === 4" (opened)="setStep(4)" >
    <mat-expansion-panel-header>
    <mat-panel-title>
      Address Panel
    </mat-panel-title>
    <mat-panel-description>
      <mat-error   *ngIf="!myform.controls['address'].valid && myform.controls['address'].touched" class="errortext">Address field can not be blank</mat-error> 
    </mat-panel-description>
    </mat-expansion-panel-header>
    <mat-form-field >
      <textarea matInput placeholder="Address"  [formControl]="myform.controls['address']" (blur)="inputUntouch(myform,'address')"></textarea>
    </mat-form-field >
  
    
    <mat-action-row>
      <button mat-button  (click)="prevStep()">Previous</button>
      
    </mat-action-row>
    </mat-expansion-panel>


    </mat-accordion>




  

  <button mat-button class="subbtn">Click me!</button>

</form>



</mat-card>


 